from collections import defaultdict
from typing import List, Dict

import vk_api

# Angry!

waiting_angry_phrases = {
    0 : "ÐŸÐ¾Ð´Ð¾Ð¶Ð´Ð¸Ñ‚Ðµ, Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°. Ð¡ÐµÐ¹Ñ‡Ð°Ñ Ñ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÑŽ Ð²Ð°Ñˆ Ð¿Ñ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰Ð¸Ð¹ Ð²Ð¾Ð¿Ñ€Ð¾Ñ. Ð•ÑÐ»Ð¸ Ð²Ð´Ñ€ÑƒÐ³ Ð²Ñ‹ ÑÐºÐ°Ð·Ð°Ð»Ð¸ Ñ‡Ñ‚Ð¾-Ð½Ð¸Ð±ÑƒÐ´ÑŒ Ð´ÐµÐ»ÑŒÐ½Ð¾Ðµ, Ñ‚Ð¾ ÑÐ¿Ñ€Ð¾ÑÐ¸Ñ‚Ðµ ÑÑ‚Ð¾ Ð¿Ð¾Ð¿Ð¾Ð·Ð¶Ðµ...",
    1 : "ÐŸÐ¾Ð´Ð¾Ð¶Ð´Ð¸Ñ‚Ðµ, Ð´Ñ€ÑƒÐ³ Ð¼Ð¾Ð¹ Ð½ÐµÑ‚ÐµÑ€Ð¿ÐµÐ»Ð¸Ñ‹Ð²Ð¹!",
    2 : "ÐŸÐ¾Ð´Ð¾Ð¶Ð´Ð¸Ñ‚Ðµ, ÑÐºÐ°Ð·Ð°Ð½Ð¾ Ð¶Ðµ Ð’Ð°Ð¼!",
    3 : "ÐÑƒ ÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð¼Ð¾Ð¶Ð½Ð¾?! Ð”Ð¾ÑÑ‚Ð°Ð»Ð¸!",
    4 : "Ð¢ÑÐ¶Ñ‘Ð»Ñ‹Ð¹ ÑÐ»ÑƒÑ‡Ð°Ð¹...",
    5 : "Ð•Ñ‰Ñ‘ Ñ€Ð°Ð· Ð½Ð°Ð¿Ð¸ÑˆÐµÑ‚Ðµ - Ð·Ð°Ð±Ð°Ð½ÑŽ!",
    6 :  "ðŸ˜¡",
    7 :  "ðŸ˜¡ðŸ˜¡",
    8 :  "ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡",
    9 :  "ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡",
    10 : "ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡",
    11 : "ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡",
    12 : "ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡",
    13 : "ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡",
    14 : "ðŸ˜¡ðŸ˜¡",
    15 : "ðŸ˜¡",
    16 : "..."
}

bad_commands_angry_phrases = {
    3: "ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¾Ð´Ð½Ñƒ Ð¸Ð· Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð½Ñ‹Ñ… Ð¾Ð¿Ñ†Ð¸Ð¹",
    4: "Ðš ÑÐ¾Ð¶Ð°Ð»ÐµÐ½Ð¸ÑŽ, Ð´Ð°Ð½Ð½Ð°Ñ Ð¾Ð¿Ñ†Ð¸Ñ Ð¼Ð½Ðµ Ð½Ðµ Ð¸Ð·Ð²ÐµÑÑ‚Ð½Ð°. Ð•ÑÐ»Ð¸ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð½Ð° Ð±Ñ‹Ð»Ð° Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð°, Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð½Ð° wolframalpha@wolframresearch.com",
    5: "Ð•Ñ‰Ñ‘ Ñ€Ð°Ð· Ð²Ð²ÐµÐ´Ñ‘Ñ‚Ðµ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½ÑƒÑŽ Ð¾Ð¿Ñ†Ð¸ÑŽ - Ñ€Ð°Ð·Ð¾Ð·Ð»ÑŽÑÑŒ!",
    6: "ÐÐÐÐÐÐÐÐÐÐ!!! ÐÐµ Ð½Ð°Ð´Ð¾ Ð±Ñ‹Ð»Ð¾ Ð¼ÐµÐ½Ñ Ð´Ð¾Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ! ÐšÐ°Ðº Ð¼Ð¾Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ð½Ð°ÑÑ‚Ð¾Ð»ÑŒÐºÐ¾ ... Ð½ÐµÑÐ¾Ð¾Ð±Ñ€Ð°Ð·Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑÑ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ€Ð°Ð· Ð¿Ð¾Ð´Ñ€ÑÐ´ Ð½Ðµ ÑÐ¼Ð¾Ñ‡ÑŒ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾ Ð²Ð²ÐµÑÑ‚Ð¸ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ???",
    7 :    "ðŸ˜¡",
    8 :    "ðŸ˜¡",
    9:     "ðŸ˜¡ðŸ˜¡",
    10 :   "ðŸ˜¡ðŸ˜¡ðŸ˜¡",
    11 :   "ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡",
    12 :   "ðŸ˜¡ðŸ˜¡ðŸ˜¡ðŸ˜¡",
    13 :   "ðŸ˜¡ðŸ˜¡ðŸ˜¡",
    14 :   "ðŸ˜¡ðŸ˜¡",
    15 :   "ðŸ˜¡",
    16 :   "ðŸ˜¡",
    17 :    "..."
}



################################################################################################################################################################################
# Function optimization info:

function_optimization_parameters = \
[
    "function",
    "target_minimum",
    "variable_ranges"
]

function_optimization_parameter_names = \
{
    "function" : "Ð¦ÐµÐ»ÐµÐ²Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ",
    "target_minimum" : "ÐŸÑ€ÐµÐ´Ð¿Ð¾Ð»Ð°Ð³Ð°ÐµÐ¼Ñ‹Ð¹ Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼",
    "variable_ranges" : "Ð”Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½Ñ‹ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ…"
}

reversed_function_optimization_parameter_names = \
{
    function_optimization_parameter_names[i] : i for i in function_optimization_parameter_names
}

function_optimization_parameter_description = \
{
    "function" : "ÐžÐ±ÑŠÐµÐºÑ‚ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸. Ð Ð°Ð·ÑƒÐ¼ÐµÐµÑ‚ÑÑ, ÑÑ‚Ð¾ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€.",

    "target_minimum" : "ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ðµ, Ñ‡Ñ‚Ð¾ Ñ†ÐµÐ»ÐµÐ²Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð° ÑÐ½Ð¸Ð·Ñƒ Ð½Ð° Ñ€Ð°ÑÑÐ¼Ð°Ñ‚Ñ€Ð¸Ð²Ð°ÐµÐ¼Ð¾Ð¼ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ðµ. "
                       "Ð”Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð»ÑŒÐ½ÑƒÑŽ Ð¸Ð·Ð²ÐµÑÑ‚Ð½ÑƒÑŽ Ð’Ð°Ð¼ Ð½Ð¸Ð¶Ð½ÑŽÑŽ Ð³Ñ€Ð°Ð½Ð¸Ñ†Ñƒ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð° Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ (Ð½Ð° Ð´Ð°Ð½Ð½Ð¾Ð¼ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ðµ). "
                       "Ð’ ÑÐ»ÑƒÑ‡Ð°Ðµ ÐµÑÐ»Ð¸ Ð²Ð²ÐµÐ´Ñ‘Ð½Ð½Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾ Ð½Ðµ Ð¾ÐºÐ°Ð¶ÐµÑ‚ÑÑ Ð¼Ð¸Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÑŽÑ‰Ð¸Ð¼ Ð´Ð»Ñ Ð¸ÑÑ…Ð¾Ð´Ð½Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸, Ð±Ð¾Ñ‚ Ð±ÑƒÐ´ÐµÑ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ñ Ð·Ð°Ð¼ÐµÑ‚Ð½Ñ‹Ð¼Ð¸ Ð¿Ð¾Ð³Ñ€ÐµÑˆÐ½Ð¾ÑÑ‚ÑÐ¼Ð¸. "
                       "Ð’Ð°ÑˆÐµ Ñ‡Ð¸ÑÐ»Ð¾: ",

    "variable_ranges" : "Ð”Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹ Ð² Ð’Ð°ÑˆÐµÐ¼ ÑƒÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ð¸ Ð½ÑƒÐ¶Ð½Ð¾ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ, Ð½Ð° ÐºÐ°ÐºÐ¾Ð¼ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ðµ ÐµÑ‘ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ð¹ ÑÐ»ÐµÐ´ÑƒÐµÑ‚ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ. \
                        Ð”Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ð¸Ð· Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð½ÑƒÐ¶Ð½Ð¾ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ ÐµÑ‘ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¸ Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ. Ð‘ÑƒÐ´ÐµÑ‚ Ð½Ð°Ð¹Ð´ÐµÐ½ Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ Ð² ÑÑ‚Ð¾Ð¼ Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½Ðµ."
}


function_optimizing_parameter_examples = \
{
    "function" : "0.5 + (cos(sin(abs(x^2 - y^2)))^2 - 0.5) / (1 + 0.001(x^2 + y^2))^2",
    "target_minimum" : "0.1 Ð¸Ð»Ð¸ -23.9e30",
    "variable_ranges" : "x âˆˆ (-1; 10]; y: in 30.6 -> 100., 10 < z <= 11e-2"
}

################################################################################################################################################################################



# Solving equations:
################################################################################################################################################################################

equation_solving_parameters = \
[
    "function",
    "variable_ranges"
]

equation_solving_parameter_names = \
{
    "function" : "Ð£Ñ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ",
    "variable_ranges" : "Ð”Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½Ñ‹ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ…"
}

reversed_equation_solving_parameter_names = \
{
    equation_solving_parameter_names[i] : i for i in equation_solving_parameter_names
}

equation_solving_parameter_description = \
{
    "function" : "Ð¡Ð°Ð¼Ð¾ ÑƒÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ. Ð Ð°Ð·ÑƒÐ¼ÐµÐµÑ‚ÑÑ, ÑÑ‚Ð¾ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€.",

    "variable_ranges" : "Ð”Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹ Ð² Ð’Ð°ÑˆÐµÐ¼ ÑƒÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ð¸ Ð½ÑƒÐ¶Ð½Ð¾ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ, Ð½Ð° ÐºÐ°ÐºÐ¾Ð¼ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ðµ ÐµÑ‘ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ð¹ ÑÐ»ÐµÐ´ÑƒÐµÑ‚ Ñ€ÐµÑˆÐ°Ñ‚ÑŒ ÑƒÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ. "
    "Ð”Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ð¸Ð· Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð½ÑƒÐ¶Ð½Ð¾ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ ÐµÑ‘ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¸ Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ. Ð‘ÑƒÐ´ÐµÑ‚ Ð½Ð°Ð¹Ð´ÐµÐ½ Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ Ð² ÑÑ‚Ð¾Ð¼ Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½Ðµ."
}

equation_solving_parameter_examples = \
{
    "function" : "x^2 = -y**2",
    "variable_ranges" : function_optimizing_parameter_examples["variable_ranges"]
}
################################################################################################################################################################################


################################################################################################################################################################################
# Plotting:

plotting_parameters = \
[
    "functions",
    "variable_range"
]

plotting_parameter_names = \
{
    "functions" : "Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸",
    "variable_range" : "Ð”Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹"
}

reversed_plotting_parameter_names = \
{
    plotting_parameter_names[i] : i for i in plotting_parameter_names
}

plotting_parameter_description = \
{
    "functions" : "Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð½Ð° Ð³Ñ€Ð°Ñ„Ð¸ÐºÐµ.",

    "variable_range" : "Ð”Ð»Ñ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹ Ð½ÑƒÐ¶Ð½Ð¾ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ, Ð½Ð° ÐºÐ°ÐºÐ¾Ð¼ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ðµ ÐµÑ‘ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ð¹ ÑÐ»ÐµÐ´ÑƒÐµÑ‚ Ð¡Ñ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð³Ñ€Ð°Ñ„Ð¸Ðº. "
    "Ð”Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹ Ð½ÑƒÐ¶Ð½Ð¾ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ ÐµÑ‘ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¸ Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ."
}

plotting_parameter_examples = \
{
    "functions" : "0.5x + 5 && 3sin(x) && 5sqrt(abs(x) - 5) && 10sgn(x) * sqrt(x)",
    "variable_range" : "x âˆˆ (-1; 10]"
}




